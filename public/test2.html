<html>
<head>
    <script src="/lib/flashUtils.js"></script>
    <script src="https://wowza02.onevent.online:8444/client2/flashphoner.js"></script>
    <style>
        .videoBox{
            width: 240px; height: 180px;
            display:flex;
            background: yellow;
            align-items: center;justify-content: center;
        }
        .videoBox video{
            max-width: 100%;
            height: 100%;
        }
    </style>
    <link href="https://v4.proofix.ru/flu/player/0.47cd2b8b1d719dc762ce.css" rel="stylesheet">
    <script type="text/javascript" src="https://v4.proofix.ru/flu/player/runtime.85ff25b349712e33777f.js"></script>
    <script type="text/javascript" src="https://v4.proofix.ru/flu/player/vendors.184f9cd2e3f8cf6c2293.js"></script>
    <script type="text/javascript" src="https://v4.proofix.ru/flu/player/main.1098242a1f66235163b7.js"></script>
</head>
<body>

<div id="mute" style="cursor: pointer;padding: 4px; border:1px solid; width: min-content; background: yellow">mute</div>
<div id="unMute" style="cursor: pointer;padding: 4px; border:1px solid;width: min-content; background: yellow">unMute</div>

<div style="display: flex; margin-top:20px;">
    <div>
<div>profix</div>
<iframe id="if" width="800" height="800" src="https://v4.proofix.ru/cbr_rus/embed.html?realtime=true&autoplay=false"></iframe>
    </div>
    <div>
<div>тест:</div>
<iframe id="iftest" width="800" height="800" src="/test3.html"></iframe>
    </div>
</div>
<div>объект плейера</div>
<div id="flussonic-player">

</div>
<ul id="d"></ul>
<div>

</div>
<script>

    window.onload = function() {
        var options = {
            parentId: '#flussonic-player',
            width: '100%',
            height: '100%',
        }
        var config = {"streamName":"cbr_rus","hasPreview":false,"rtmpPort":1935,"rtmpsPort":null,"authTokenName":"token","thumbnails_enabled":false,"type":"live","dvr_info":null,"protocols":{"hds":true,"rtmp":true,"hls":true,"dash":true,"webrtc":true,"mse":true,"mss":true}};
        var params = FlussonicPlayer.parseUrl("https://v4.proofix.ru/", options, {"streamName":"cbr_rus","hasPreview":false,"rtmpPort":1935,"rtmpsPort":null,"authTokenName":"token","thumbnails_enabled":false,"type":"live","dvr_info":null,"protocols":{"hds":true,"rtmp":true,"hls":true,"dash":true,"webrtc":true,"mse":true,"mss":true}})
        window.flussonicPlayer = new FlussonicPlayer(params);
        window.flussonicPlayer.onMediaInfo = (rawMetaData) => {
            var videoTracks = window.player.getVideoTracks()
            var audioTracks = window.player.getAudioTracks()
            console.log("onMediaInfo", videoTracks,audioTracks );
        }

        document.getElementsByTagName('title')[0].innerHTML = config.streamName;
    }


    document.getElementById('mute').addEventListener("click", ()=>{
       console.log("mute", flussonicPlayer)

        console.log(flussonicPlayer.getAudioTracks());
       var elem=document.getElementById('if')
       elem.contentWindow.postMessage('mute')
       document.getElementById('iftest').contentWindow.postMessage('mute')
   })
   document.getElementById('unMute').addEventListener("click", ()=>{
       console.log("unMute")
       var elem=document.getElementById('if')
       elem.contentWindow.postMessage('unMute')
       document.getElementById('iftest').contentWindow.postMessage('unMute')
   })




</script>
</body>
</html>