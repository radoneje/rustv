extends layout
block head
    link(rel='stylesheet', href='/stylesheets/old.css')
    script.
        var roomid = #{room.id}
        var eventid = #{room.eventid}
        var room=!{JSON.stringify(room)}
    <script src="/lib/vue-youtube.js"></script>
    script(src="/javascripts/utils.js")
    script(src="/javascripts/moderatorScript.js")
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans&display=swap" rel="stylesheet">
    <script src="/lib/autosize.min.js"></script>
    link(rel='stylesheet', href='/stylesheets/room.css')
    if event.isClientCss
        link(rel='stylesheet', href='/stylesheets/' + event.clientCss)

block content
    div.adminScreen.adminContainer(id="app" style="height: 100vh;" v-bind:class="{isPres:isPres}")

        div.aModBox(style="height:100%")
            div.aModSect(style="width:66%")
                div.aModSectMenu
                    div.aModSectMenuItem(v-bind:class="{active:lSectActiveIndex==2}" v-on:click="lSectActiveIndex=2")
                        div.aModSectTitle Вопросы ({{q.length}})
                div.aSectBody(id="qBox" v-if="lSectActiveIndex==2")
                    div.qItem(v-for="item in q" v-key="item.id" v-bind:class="{ready:item.isReady}")

                        div.qItemName {{item.i}}&nbsp;{{item.f}}&nbsp;{{item.smi}}
                        //long-text(v-bind:itemtext="item.text")
                        div.qItemText(v-html="item.text")
                        div(style="text-align:center")
                            video.qItemVideo(v-bind:src="'/files/'+item.video" v-if="item.video" controls)
                        div.qItemPhoto(v-on:click="window.open('/files/'+item.photo)" v-bind:style="{backgroundImage:'url(/files/'+item.photo+')'}" v-if="item.photo" controls)
                        div.qItemAnsvwer(v-if="item.answer!=null")
                            div.qItemAnsvwerLabel Ответ:
                            div.qItemAnsverText
                                //textarea( :id="'qAnswerText'+item.id" placeholder="Напишите здесь текст ответа" v-model="item.answer" v-on:change="qItemAnswerChange(item)")
                                autosize-teztarea(v-bind:item="item" v-on:change="qItemAnswerChange(item)")

                        div.qItemDate
                            //include elements/likes
                        div.greenBtn(v-if="item.video" style="height: max-content;width: max-content;padding: 5px;" v-on:click="showUploadedVideo(item, $event)")
                            span Показать на экране
                        div.qItemDate
                            span.link.green(v-if="! item.isSpk" v-on:click="qToSpk(item)") Показать спикеру &nbsp;&nbsp;
                            span.link.green.black(v-else v-on:click="qToSpk(item)") Убрать от спикера &nbsp;&nbsp;
                            span.link.green(v-if="item.answer==null" v-on:click="item.answer=''") Ответить&nbsp;&nbsp;
                            span.link.green.black(v-if="item.isReady" v-on:click="QsetNew(item)") Пометить новым&nbsp;&nbsp;
                            span.link.green(v-else v-on:click="QsetOld(item)") Пометить отвеченным&nbsp;&nbsp;
                                span
                                    <svg width="15" height="11" viewBox="0 0 15 11" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M13.7319 0.295798C13.639 0.20207 13.5284 0.127675 13.4065 0.0769067C13.2846 0.026138 13.1539 0 13.0219 0C12.8899 0 12.7592 0.026138 12.6373 0.0769067C12.5155 0.127675 12.4049 0.20207 12.3119 0.295798L4.86192 7.7558L1.73192 4.6158C1.6354 4.52256 1.52146 4.44925 1.3966 4.40004C1.27175 4.35084 1.13843 4.32671 1.00424 4.32903C0.870064 4.33135 0.737655 4.36008 0.614576 4.41357C0.491498 4.46706 0.380161 4.54428 0.286922 4.6408C0.193684 4.73732 0.12037 4.85126 0.0711659 4.97612C0.0219619 5.10097 -0.00216855 5.2343 0.000152918 5.36848C0.00247438 5.50266 0.0312022 5.63507 0.0846957 5.75814C0.138189 5.88122 0.215401 5.99256 0.311922 6.0858L4.15192 9.9258C4.24489 10.0195 4.35549 10.0939 4.47735 10.1447C4.59921 10.1955 4.72991 10.2216 4.86192 10.2216C4.99394 10.2216 5.12464 10.1955 5.2465 10.1447C5.36836 10.0939 5.47896 10.0195 5.57192 9.9258L13.7319 1.7658C13.8334 1.67216 13.9144 1.5585 13.9698 1.432C14.0253 1.30551 14.0539 1.1689 14.0539 1.0308C14.0539 0.892697 14.0253 0.756091 13.9698 0.629592C13.9144 0.503092 13.8334 0.389441 13.7319 0.295798Z" fill="#28BA54"/>
                                    </svg>
                            span &nbsp;&nbsp;
                            span.link.red(v-on:click="deleteQ(item)") Удалить
                            span &nbsp;&nbsp;
                            span {{moment(item.date).format("HH:mm")}}


                div.rFooter
                    div.fileLoadProgress
                    div.askWr(v-if="lSectActiveIndex==2")
                        input.ask#qText(v-on:paste="qTextOnPaste($event)" placeholder="Напишите Ваш вопрос" v-model="qText" v-on:keydown="qtextChange($event)")
                        <svg v-on:click="qtextSend()" class="svgSendBtn" v-on:click="chattextSend()" width="15px" height="15px" viewBox="0 0 15 15" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch -->
                        <desc>Created with Sketch.</desc>
                        <defs></defs>
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="Desktop-HD" transform="translate(-712.000000, -505.000000)" fill-rule="nonzero">
                        <g id="ic-baseline-call-made" transform="translate(708.000000, 500.000000)">
                        <g id="Icon">
                        <polygon id="Icon-Shape" fill="#9A9A9A" points="9 5 9 7 15.59 7 4 18.59 5.41 20 17 8.41 17 15 19 15 19 5"></polygon>
                        <rect id="Icon-Rectangle-path" fill-opacity="0" fill="#000000" x="0" y="0" width="24" height="24"></rect>
                        </g>
                        </g>
                        </g>
                        </g>
                        </svg>

            div.aModSect
                div.aModSectTitle Пользователи ({{users.length}})
                    input.aModSectFind(type="text" placeholder="Поиск" v-model='userFindText' v-bind:class="{active:userFindText.length>0}" )
                    div.aModSectFindClear(v-on:click="userFindText=''" v-if="userFindText.length>0")
                        <svg width="18px" height="18px" viewBox="0 0 18 18" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <!-- Generator: Sketch 51.3 (57544) - http://www.bohemiancoding.com/sketch -->
                        <desc>Created with Sketch.</desc>
                        <defs></defs>
                        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                        <g id="Mobile" transform="translate(-149.000000, -501.000000)" fill="#eeeeee" fill-rule="nonzero">
                        <g id="ic-baseline-add-circle-outline" transform="translate(148.000000, 500.000000)">
                        <g id="Icon">
                        <path d="M10.8333333,5.83333333 L9.16666667,5.83333333 L9.16666667,9.16666667 L5.83333333,9.16666667 L5.83333333,10.8333333 L9.16666667,10.8333333 L9.16666667,14.1666667 L10.8333333,14.1666667 L10.8333333,10.8333333 L14.1666667,10.8333333 L14.1666667,9.16666667 L10.8333333,9.16666667 L10.8333333,5.83333333 Z M10,1.66666667 C5.4,1.66666667 1.66666667,5.4 1.66666667,10 C1.66666667,14.6 5.4,18.3333333 10,18.3333333 C14.6,18.3333333 18.3333333,14.6 18.3333333,10 C18.3333333,5.4 14.6,1.66666667 10,1.66666667 Z M10,16.6666667 C6.325,16.6666667 3.33333333,13.675 3.33333333,10 C3.33333333,6.325 6.325,3.33333333 10,3.33333333 C13.675,3.33333333 16.6666667,6.325 16.6666667,10 C16.6666667,13.675 13.675,16.6666667 10,16.6666667 Z" id="Icon-Shape"></path>
                        <rect id="Icon-Rectangle-path" fill-opacity="0" x="0" y="0" width="20" height="20"></rect>
                        </g>
                        </g>
                        </g>
                        </g>
                        </svg>

                div.aSectBody.aSectUser
                    include elements/modUserItem
        div#VKS
            div#videoWr
                div.VKSbox(v-if="SPKvksUsers.length>0")
                    div.VKSboxTitle Активные подключения ({{SPKvksUsers.length}})
                    div.VKSboxItems
                        div.VKSboxItem(v-for="item in SPKvksUsers" v-key="item.guid")
                            div.VKSboxItemBox
                                div.VKSboxItemTitle {{item.user.i||''}} {{item.user.f || ''}}
                                div.VKSboxItemBtn(v-on:click="disconnectSPKvksUser(item)" :id="'VKSboxItemBtn'+item.guid") Отключить

                div.videoBox#admPresBox(v-if="pres")
                    div#admPres(v-bind:style="{backgroundImage:'url(/rest/api/pres/'+pres+'/'+eventid+'/'+roomid+')'}")
                    div.videoCap Трансляция
                div.videoBox#translationVideoBox
                    include elements/mainVideo
        div.eQMesToSpkBox
            include elements/spkMessageBtn
        include elements/messageFromMod








